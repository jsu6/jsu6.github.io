<!DOCTYPE html>
<body>
<script>
// Create a small animation to observe timing behavior
const box = document.createElement("div");
box.style.width = "20px";
box.style.height = "20px";
box.style.background = "black";
document.body.appendChild(box);

// Animate it
const animation = box.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(100px)" }],
  { duration: 1000, iterations: Infinity }
);

// Collect timing observations
let samples = [];

function sample() {
  // currentTime is tied to device refresh rate and animation timeline
  const t = animation.currentTime;

  if (t != null) {
    samples.push(t);
  }

  if (samples.length < 200) {
    requestAnimationFrame(sample);
  } else {
    analyze(samples);
  }
}

function analyze(samples) {
  let deltas = [];

  for (let i = 1; i < samples.length; i++) {
    deltas.push(samples[i] - samples[i - 1]);
  }

  console.log("Observed frame deltas:", deltas);
  console.log("Average delta:", avg(deltas));
  console.log("Min/max delta:", Math.min(...deltas), Math.max(...deltas));
}

function avg(arr) {
  return arr.reduce((a, b) => a + b, 0) / arr.length;
}

// Start sampling
sample();
</script>
</body>
