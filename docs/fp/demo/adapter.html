<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WebGPU Full Adapter Info</title>
</head>
<body>
  <h1>WebGPU Adapter Info / Features / Limits</h1>
  <pre id="output">Checking WebGPU...</pre>

  <script>
    async function init() {
      const out = document.getElementById("output");

      if (!("gpu" in navigator)) {
        out.textContent = "WebGPU not supported in this browser.";
        return;
      }

      try {
        const adapter = await navigator.gpu.requestAdapter({
          powerPreference: "high-performance",
        });

        if (!adapter) {
          out.textContent = "No GPU adapter found.";
          return;
        }

        // ---- 1. INFO ----
        const infoObj = {};
        for (const key in adapter.info) {
          infoObj[key] = adapter.info[key] || "(hidden or empty)";
        }

        // ---- 2. FEATURES ----
        const featuresArr = Array.from(adapter.features);

        // ---- 3. LIMITS ----
        const limitsObj = {};
        for (const [key, value] of Object.entries(adapter.limits)) {
          limitsObj[key] = value;
        }

        // Combine all output
        const finalOutput = {
          info: infoObj,
          features: featuresArr,
          limits: limitsObj,
        };

        out.textContent = JSON.stringify(finalOutput, null, 2);

        // Also log in console
        console.log("GPUAdapter Info:", adapter.info);
        console.log("GPUAdapter Features:", featuresArr);
        console.log("GPUAdapter Limits:", limitsObj);

      } catch (err) {
        out.textContent = "Error: " + err;
        console.error(err);
      }
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
