<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>GPUAdapterInfo Full Access Test</title>
  <style>
    body { font-family: monospace; margin: 2em; background: #f9f9f9; }
    pre { background: #fff; border: 1px solid #ccc; padding: 1em; border-radius: 8px; }
    button { padding: 0.6em 1em; font-size: 1em; margin-bottom: 1em; }
  </style>
</head>
<body>
  <h1>GPUAdapterInfo (Full Developer Access)</h1>
  <button id="fetch">Query GPU Info</button>
  <pre id="output">Waiting for query...</pre>

  <script>
    async function getGPUInfo() {
      const out = document.getElementById('output');
      out.textContent = 'Querying...';

      if (!navigator.gpu) {
        out.textContent = 'WebGPU not supported.';
        return;
      }

      const adapter = await navigator.gpu.requestAdapter();
      if (!adapter) {
        out.textContent = 'No adapter found.';
        return;
      }

      try {
        const info = await adapter.info; // will work only with flags
        const result = {
          architecture: info.architecture,
          backend: info.backend,
          description: info.description,
          device: info.device,
          vendor: info.vendor,
          driver: info.driver,
          d3dShaderModel: info.d3dShaderModel,
          powerPreference: info.powerPreference,
          isFallbackAdapter: info.isFallbackAdapter,
          subgroupMinSize: info.subgroupMinSize,
          subgroupMaxSize: info.subgroupMaxSize,
        };
        out.textContent = JSON.stringify(result, null, 2);
      } catch (e) {
        out.textContent = 'Failed to query adapter info.\n\n' + e;
      }
    }

    document.getElementById('fetch').addEventListener('click', getGPUInfo);
  </script>
</body>
</html>
