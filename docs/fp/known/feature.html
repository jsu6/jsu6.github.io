<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>GPUAdapterInfo Test</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    pre { background: #f5f5f5; padding: 1em; border-radius: 8px; }
    button { padding: 0.5em 1em; font-size: 1em; }
  </style>
</head>
<body>
  <h1>GPUAdapterInfo Test</h1>
  <button id="fetch">Get GPU Info</button>
  <pre id="output">Click to query...</pre>

  <script>
    async function getGPUInfo() {
      const output = document.getElementById('output');
      output.textContent = "Querying...";

      if (!('gpu' in navigator)) {
        output.textContent = "WebGPU not supported in this browser.";
        return;
      }

      try {
        const adapter = await navigator.gpu.requestAdapter();
        if (!adapter) {
          output.textContent = "No GPU adapter found.";
          return;
        }

        let info = null;

        // Chromium DeveloperFeatures only
        if (adapter.requestAdapterInfo) {
          try {
            info = await adapter.requestAdapterInfo();
          } catch (err) {
            console.warn("requestAdapterInfo threw:", err);
          }
        }

        const result = {
          supported: !!info,
          architecture: info?.architecture || "N/A",
          description: info?.description || adapter.name || "N/A",
          device: info?.device || "N/A",
          vendor: info?.vendor || "N/A",
          backend: adapter?.features ? Array.from(adapter.features) : []
        };

        output.textContent = JSON.stringify(result, null, 2);
      } catch (err) {
        output.textContent = "Error: " + err;
      }
    }

    document.getElementById('fetch').addEventListener('click', getGPUInfo);
  </script>
</body>
</html>
