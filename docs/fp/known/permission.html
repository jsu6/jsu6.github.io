<!doctype html>
<html>
<meta charset="utf-8">
<title>DeviceOrientation Minimal PoC</title>
<body style="font-family:system-ui;padding:1rem">
<h3>DeviceOrientation Minimal PoC</h3>
<button id="btn">Request Permission & Start</button>
<pre id="out">Waiting...</pre>

<script>
const out = document.getElementById('out');
const log = (...a) => out.textContent += a.join(' ') + '\n';

document.getElementById('btn').onclick = async () => {
  out.textContent = '';  // clear
  log('UserAgent:', navigator.userAgent);
  log('');

  try {
    if (typeof DeviceOrientationEvent === 'undefined') {
      log('‚ùå DeviceOrientationEvent not supported.');
      return;
    }

    // iOS Safari permission flow
    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
      log('üîí Calling requestPermission()...');
      const res = await DeviceOrientationEvent.requestPermission();
      log('Permission result:', res);
      if (res !== 'granted') return;
    } else {
      log('‚ÑπÔ∏è requestPermission() not available (no popup expected).');
    }

    window.addEventListener('deviceorientation', e => {
      log('Event:',
          'alpha=', e.alpha,
          'beta=', e.beta,
          'gamma=', e.gamma,
          'absolute=', e.absolute);
    });

    log('‚úÖ Listening for deviceorientation events...');
  } catch (err) {
    log('‚ö†Ô∏è Error:', err);
  }
};
</script>
</body>
</html>
